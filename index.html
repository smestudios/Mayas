<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Sistema de Ventas Mayas</title>
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>

  <aside class="sidebar" id="sidebar">
    <h2>ðŸ“Š Mayas</h2>
    <nav>
      <button onclick="mostrar('dashboard')">Dashboard</button>
      <button onclick="mostrar('productos')">Productos</button>
      <button onclick="mostrar('inventario')">Inventario</button>
      <button onclick="mostrar('ventas')">Ventas</button>
      <button onclick="mostrar('pedidos')">Pedidos</button>
      <button onclick="mostrar('gastos')">Gastos</button>
      <button onclick="mostrar('clientes')">Clientes</button>
    </nav>
  </aside>
  <div class="sidebar-overlay" id="sidebarOverlay"></div>

  <main class="content">
    <header class="topbar">
      <button class="menu-toggle" id="menuToggle" aria-label="Abrir menÃº">
        â˜°
      </button>
      <span class="topbar-title">Sistema de Ventas Mayas</span>
    </header>
    <section id="dashboard" class="vista activa">
      <h1>Resumen General</h1>
      <div class="cards">
        <div class="card">ðŸ’° Ventas <span id="totalVentas">$0</span></div>
        <div class="card">ðŸ“¦ Costos <span id="totalCostos">$0</span></div>
        <div class="card">ðŸ“‰ Gastos <span id="totalGastos">$0</span></div>
        <div class="card">ðŸ“Š Utilidad <span id="utilidad">$0</span></div>
      </div>

      <div class="card" style="margin-top:30px">
        <h3>ðŸ“… Resumen por rango de fechas</h3>

        <div style="margin-bottom:10px">
          <label>
            Desde:
            <input type="date" id="fechaInicio">
          </label>

          <label style="margin-left:10px">
            Hasta:
            <input type="date" id="fechaFin">
          </label>

          <button class="primary" style="margin-left:10px" id="btnFiltrar">
            Calcular
          </button>
        </div>

        <div class="cards">
          <div class="card">ðŸ’° Ventas <span id="filtroVentas">$0</span></div>
          <div class="card">ðŸ“¦ Costos <span id="filtroCostos">$0</span></div>
          <div class="card">ðŸ“‰ Gastos <span id="filtroGastos">$0</span></div>
          <div class="card">ðŸ“Š Utilidad <span id="filtroUtilidad">$0</span></div>
        </div>
      </div>



    </section>

    <section id="productos" class="vista">
      <h1>Productos</h1>

      <!-- TOOLBAR -->
      <div class="toolbar">
        <input
          type="text"
          id="buscadorProductos"
          placeholder="ðŸ” Buscar producto..."
        >
        <button class="primary" id="btnNuevoProducto">âž• Nuevo</button>
      </div>

      <!-- TABLA -->
      <table class="tabla">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Costo</th>
            <th>Precio</th>
            <th>Ganancia</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="tablaProductos"></tbody>
      </table>
    </section>

    <!-- MODAL PRODUCTO -->
    <div class="modal" id="modalProducto">
      <div class="modal-content">
        <h3 id="tituloModal">Nuevo producto</h3>

        <input id="prodNombre" placeholder="Nombre">
        <input id="prodCategoria" placeholder="CategorÃ­a">
        <input id="prodCosto" type="number" placeholder="Costo">
        <input id="prodPrecio" type="number" placeholder="Precio venta">

        <div class="acciones">
          <button class="primary" id="btnGuardarProducto">Guardar</button>
          <button class="danger" id="btnCancelar">Cancelar</button>
        </div>
      </div>
    </div>



    <section id="inventario" class="vista">
      <h1>Inventario</h1>

      <table class="tabla">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Stock actual</th>
            <th>Stock mÃ­nimo</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="tablaInventario">
          <!-- JS llena esto -->
        </tbody>
      </table>
    </section>


    <!-- MODAL INVENTARIO -->
    <div class="modal" id="modalInventario">
      <div class="modal-content">
        <h3 id="tituloInventario">Movimiento de inventario</h3>

        <p id="nombreProductoInventario" style="margin-bottom:10px;font-weight:600"></p>

        <input
          type="number"
          id="cantidadMovimiento"
          placeholder="Cantidad"
          min="1"
        >

        <input
          type="text"
          id="motivoMovimiento"
          placeholder="Motivo (opcional)"
        >

        <div class="acciones">
          <button class="primary" id="btnGuardarMovimiento">
            Guardar
          </button>
          <button class="danger" id="btnCancelarInventario">
            Cancelar
          </button>
        </div>
      </div>
    </div>


    <section id="ventas" class="vista">
    <h1>Ventas</h1>
    
    <div class="toolbar">
      <button class="primary" id="btnVender">ðŸ›’ Vender</button>
    </div>

    <div class="table-wrapper">
    <table class="tabla">
      <thead>
        <tr>
          <th>Fecha</th>
          <th>Cliente</th>
          <th>Tipo</th>
          <th>Productos</th>
          <th>Total</th>
          <th>Ganancia</th>
          <th>Acciones</th>
        </tr>
      </thead>
      <tbody id="tablaVentas"></tbody>
    </table>
    </div>
  </section>

  <section id="pedidos" class="vista">
    <h1>Pedidos</h1>

    <div class="toolbar">
      <button class="primary" id="btnNuevoPedido">ðŸ“¦ Nuevo pedido</button>
    </div>

    <div class="table-wrapper">
      <table class="tabla">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>Cliente</th>
            <th>Observaciones</th>
            <th>Productos</th>
            <th>Total</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="tablaPedidos"></tbody>
      </table>
    </div>
  </section>

  <div class="modal" id="modalPedido">
    <div class="modal-content" style="max-width:600px">

      <h3 id="tituloPedido">Nuevo pedido</h3>

      <select id="pedidoCliente">
        <option value="">Selecciona cliente / tienda</option>
      </select>

      <select id="pedidoTipo">
        <option value="mostrador">Mostrador</option>
        <option value="tienda">Tienda</option>
        <option value="online">Online</option>
      </select>

      <input
        id="pedidoObservaciones"
        type="text"
        placeholder="Observaciones (opcional)"
      >

      <hr>

      <div id="productosPedido"></div>

      <button class="secondary" id="btnAgregarProductoPedido">
        âž• Agregar producto
      </button>

      <hr>

      <div class="venta-resumen">
        <div class="venta-totales">
          <p><strong>Total:</strong> $<span id="pedidoTotal">0</span></p>
          <p><strong>Ganancia:</strong> $<span id="pedidoGanancia">0</span></p>
        </div>
        <div class="acciones venta-acciones">
          <button class="primary" id="btnGuardarPedido">Guardar pedido</button>
          <button class="danger" id="btnCancelarPedido">Cancelar</button>
        </div>
      </div>

    </div>
  </div>

  <!-- MODAL VENTA  -->
  <div class="modal" id="modalVenta">
    <div class="modal-content" style="max-width:600px">

      <h3 id="tituloVenta">Nueva venta</h3>

      <select id="ventaCliente">
        <option value="">Selecciona cliente / tienda</option>
      </select>

      <select id="ventaTipo">
        <option value="mostrador">Mostrador</option>
        <option value="tienda">Tienda</option>
        <option value="online">Online</option>
      </select>

      <hr>

      <div id="productosVenta"></div>

      <button class="secondary" id="btnAgregarProducto">
        âž• Agregar producto
      </button>

      <hr>

      <div class="venta-resumen">
        <div class="venta-totales">
          <p><strong>Total:</strong> $<span id="ventaTotal">0</span></p>
          <p><strong>Ganancia:</strong> $<span id="ventaGanancia">0</span></p>
        </div>
        <div class="acciones venta-acciones">
          <button class="secondary" id="btnGuardarVentaPdf">
            Guardar y descargar PDF
          </button>
          <button class="primary" id="btnGuardarVenta">Guardar venta</button>
          <button class="danger" id="btnCancelarVenta">Cancelar</button>
        </div>
      </div>

    </div>
  </div>



    <section id="gastos" class="vista">
    <h1>Gastos</h1>

    <div class="toolbar">
      <button class="primary" id="btnNuevoGasto">âž• Nuevo</button>
    </div>

    <div class="table-wrapper">
      <table class="tabla">
        <thead>
          <tr>
            <th>Fecha</th>
            <th>DescripciÃ³n</th>
            <th>CategorÃ­a</th>
            <th>Monto</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="tablaGastos"></tbody>
      </table>
    </div>
  </section>

  <div class="modal" id="modalGasto">
    <div class="modal-content">
      <h3 id="tituloGasto">Nuevo gasto</h3>

      <input id="gastoFecha" type="date">
      <input id="gastoDescripcion" placeholder="DescripciÃ³n">
      <input id="gastoCategoria" placeholder="CategorÃ­a">
      <input id="gastoMonto" type="number" placeholder="Monto" min="0">

      <div class="acciones">
        <button class="primary" id="btnGuardarGasto">Guardar</button>
        <button class="danger" id="btnCancelarGasto">Cancelar</button>
      </div>
    </div>
  </div>

  <section id="clientes" class="vista">
    <h1>Clientes</h1>

    <div class="toolbar">
      <button class="primary" id="btnNuevoCliente">âž• Nuevo</button>
    </div>

    <div class="table-wrapper">
      <table class="tabla">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Tipo</th>
            <th>TelÃ©fono</th>
            <th>DirecciÃ³n</th>
            <th>Estado</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="tablaClientes"></tbody>
      </table>
    </div>
  </section>

  <div class="modal" id="modalCliente">
    <div class="modal-content">
      <h3 id="tituloCliente">Nuevo cliente</h3>

      <input id="clienteNombre" placeholder="Nombre">
      <select id="clienteTipo">
        <option value="cliente">Cliente</option>
        <option value="tienda">Tienda</option>
      </select>
      <input id="clienteTelefono" placeholder="TelÃ©fono">
      <input id="clienteDireccion" placeholder="DirecciÃ³n">
      <select id="clienteEstado">
        <option value="true">Activo</option>
        <option value="false">Inactivo</option>
      </select>

      <div class="acciones">
        <button class="primary" id="btnGuardarCliente">Guardar</button>
        <button class="danger" id="btnCancelarCliente">Cancelar</button>
      </div>
    </div>
  </div>


  </main>

<script>
function mostrar(id) {
  document.querySelectorAll('.vista').forEach(v => v.classList.remove('activa'));
  document.getElementById(id).classList.add('activa');
}

const sidebar = document.getElementById("sidebar");
const sidebarOverlay = document.getElementById("sidebarOverlay");
const menuToggle = document.getElementById("menuToggle");

function toggleSidebar() {
  sidebar.classList.toggle("activa");
  sidebarOverlay.classList.toggle("activa");
}

menuToggle.addEventListener("click", toggleSidebar);
sidebarOverlay.addEventListener("click", toggleSidebar);

document.querySelectorAll(".sidebar button").forEach(btn => {
  btn.addEventListener("click", () => {
    sidebar.classList.remove("activa");
    sidebarOverlay.classList.remove("activa");
  });
});
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script type="module" src="js/productos.js"></script>
<script type="module" src="js/inventario.js"></script>
<script type="module" src="js/ventas.js"></script>
<script type="module" src="js/pedidos.js"></script>
<script type="module" src="js/gastos.js"></script>
<script type="module" src="js/clientes.js"></script>
<script type="module" src="js/dashboard.js"></script>


</body>
</html>
